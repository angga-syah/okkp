<!-- E:\kp\4 invoice\WPF\Themes\Modern\ModernTheme.xaml -->
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">

    <!-- Merge base Material Design theme -->
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Light.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml" />
        <ResourceDictionary Source="Colors.xaml" />
        <ResourceDictionary Source="Brushes.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <!-- Modern Color Palette -->
    <Color x:Key="PrimaryColor">#2196F3</Color>
    <Color x:Key="PrimaryDarkColor">#1976D2</Color>
    <Color x:Key="PrimaryLightColor">#BBDEFB</Color>
    <Color x:Key="AccentColor">#FF4081</Color>
    <Color x:Key="AccentDarkColor">#C2185B</Color>
    <Color x:Key="AccentLightColor">#F8BBD9</Color>
    
    <!-- Semantic Colors -->
    <Color x:Key="SuccessColor">#4CAF50</Color>
    <Color x:Key="WarningColor">#FF9800</Color>
    <Color x:Key="ErrorColor">#F44336</Color>
    <Color x:Key="InfoColor">#2196F3</Color>
    
    <!-- Surface Colors -->
    <Color x:Key="SurfaceColor">#FFFFFF</Color>
    <Color x:Key="BackgroundColor">#FAFAFA</Color>
    <Color x:Key="CardColor">#FFFFFF</Color>
    <Color x:Key="DividerColor">#E0E0E0</Color>
    
    <!-- Text Colors -->
    <Color x:Key="TextPrimaryColor">#212121</Color>
    <Color x:Key="TextSecondaryColor">#757575</Color>
    <Color x:Key="TextHintColor">#9E9E9E</Color>
    <Color x:Key="TextOnPrimaryColor">#FFFFFF</Color>

    <!-- Modern Brushes -->
    <SolidColorBrush x:Key="PrimaryBrush" Color="{StaticResource PrimaryColor}" />
    <SolidColorBrush x:Key="PrimaryDarkBrush" Color="{StaticResource PrimaryDarkColor}" />
    <SolidColorBrush x:Key="PrimaryLightBrush" Color="{StaticResource PrimaryLightColor}" />
    <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentColor}" />
    <SolidColorBrush x:Key="AccentDarkBrush" Color="{StaticResource AccentDarkColor}" />
    <SolidColorBrush x:Key="AccentLightBrush" Color="{StaticResource AccentLightColor}" />
    
    <SolidColorBrush x:Key="SuccessBrush" Color="{StaticResource SuccessColor}" />
    <SolidColorBrush x:Key="WarningBrush" Color="{StaticResource WarningColor}" />
    <SolidColorBrush x:Key="ErrorBrush" Color="{StaticResource ErrorColor}" />
    <SolidColorBrush x:Key="InfoBrush" Color="{StaticResource InfoColor}" />
    
    <SolidColorBrush x:Key="SurfaceBrush" Color="{StaticResource SurfaceColor}" />
    <SolidColorBrush x:Key="BackgroundBrush" Color="{StaticResource BackgroundColor}" />
    <SolidColorBrush x:Key="CardBrush" Color="{StaticResource CardColor}" />
    <SolidColorBrush x:Key="DividerBrush" Color="{StaticResource DividerColor}" />
    
    <SolidColorBrush x:Key="TextPrimaryBrush" Color="{StaticResource TextPrimaryColor}" />
    <SolidColorBrush x:Key="TextSecondaryBrush" Color="{StaticResource TextSecondaryColor}" />
    <SolidColorBrush x:Key="TextHintBrush" Color="{StaticResource TextHintColor}" />
    <SolidColorBrush x:Key="TextOnPrimaryBrush" Color="{StaticResource TextOnPrimaryColor}" />

    <!-- Gradient Brushes for Modern Effects -->
    <LinearGradientBrush x:Key="PrimaryGradientBrush" StartPoint="0,0" EndPoint="1,1">
        <GradientStop Color="{StaticResource PrimaryColor}" Offset="0"/>
        <GradientStop Color="{StaticResource PrimaryDarkColor}" Offset="1"/>
    </LinearGradientBrush>
    
    <LinearGradientBrush x:Key="AccentGradientBrush" StartPoint="0,0" EndPoint="1,1">
        <GradientStop Color="{StaticResource AccentColor}" Offset="0"/>
        <GradientStop Color="{StaticResource AccentDarkColor}" Offset="1"/>
    </LinearGradientBrush>

    <!-- Modern Typography -->
    <FontFamily x:Key="ModernFontFamily">Segoe UI, Arial, sans-serif</FontFamily>
    <FontFamily x:Key="ModernFontFamilyBold">Segoe UI Semibold, Arial, sans-serif</FontFamily>
    <FontFamily x:Key="MonospaceFontFamily">Consolas, Courier New, monospace</FontFamily>

    <!-- Typography Styles -->
    <Style x:Key="ModernHeadline1" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamilyBold}" />
        <Setter Property="FontSize" Value="32" />
        <Setter Property="FontWeight" Value="Light" />
        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
        <Setter Property="LineHeight" Value="40" />
    </Style>

    <Style x:Key="ModernHeadline2" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamilyBold}" />
        <Setter Property="FontSize" Value="24" />
        <Setter Property="FontWeight" Value="Light" />
        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
        <Setter Property="LineHeight" Value="32" />
    </Style>

    <Style x:Key="ModernHeadline3" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamilyBold}" />
        <Setter Property="FontSize" Value="20" />
        <Setter Property="FontWeight" Value="Regular" />
        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
        <Setter Property="LineHeight" Value="28" />
    </Style>

    <Style x:Key="ModernBody1" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamily}" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="FontWeight" Value="Regular" />
        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
        <Setter Property="LineHeight" Value="20" />
    </Style>

    <Style x:Key="ModernBody2" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamily}" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="FontWeight" Value="Regular" />
        <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}" />
        <Setter Property="LineHeight" Value="16" />
    </Style>

    <Style x:Key="ModernCaption" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamily}" />
        <Setter Property="FontSize" Value="10" />
        <Setter Property="FontWeight" Value="Regular" />
        <Setter Property="Foreground" Value="{StaticResource TextHintBrush}" />
        <Setter Property="LineHeight" Value="14" />
    </Style>

    <!-- Modern Button Styles -->
    <Style x:Key="ModernButtonStyle" TargetType="Button" BasedOn="{StaticResource MaterialDesignRaisedButton}">
        <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
        <Setter Property="Foreground" Value="{StaticResource TextOnPrimaryBrush}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="16,8" />
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamily}" />
        <Setter Property="FontWeight" Value="Medium" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="Height" Value="36" />
        <Setter Property="materialDesign:ButtonAssist.CornerRadius" Value="4" />
        <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp2" />
        <Setter Property="Cursor" Value="Hand" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp4" />
                <Setter Property="Background" Value="{StaticResource PrimaryDarkBrush}" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp8" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.6" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="ModernOutlinedButtonStyle" TargetType="Button" BasedOn="{StaticResource MaterialDesignOutlinedButton}">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="16,8" />
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamily}" />
        <Setter Property="FontWeight" Value="Medium" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="Height" Value="36" />
        <Setter Property="materialDesign:ButtonAssist.CornerRadius" Value="4" />
        <Setter Property="Cursor" Value="Hand" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{StaticResource PrimaryLightBrush}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="ModernTextButtonStyle" TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="8" />
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamily}" />
        <Setter Property="FontWeight" Value="Medium" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="Height" Value="36" />
        <Setter Property="Cursor" Value="Hand" />
    </Style>

    <!-- Modern Card Style -->
    <Style x:Key="ModernCardStyle" TargetType="materialDesign:Card">
        <Setter Property="Background" Value="{StaticResource CardBrush}" />
        <Setter Property="Padding" Value="16" />
        <Setter Property="Margin" Value="8" />
        <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp2" />
        <Setter Property="materialDesign:ShadowAssist.ShadowDepth" Value="Depth1" />
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="materialDesign:ElevationAssist.Elevation" Value="Dp4" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- Modern TextBox Style -->
    <Style x:Key="ModernTextBoxStyle" TargetType="TextBox" BasedOn="{StaticResource MaterialDesignOutlinedTextBox}">
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamily}" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="Padding" Value="12,8" />
        <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource DividerBrush}" />
        <Setter Property="materialDesign:HintAssist.Foreground" Value="{StaticResource TextHintBrush}" />
        <Setter Property="materialDesign:TextFieldAssist.UnderlineBrush" Value="{StaticResource PrimaryBrush}" />
    </Style>

    <!-- Modern ComboBox Style -->
    <Style x:Key="ModernComboBoxStyle" TargetType="ComboBox" BasedOn="{StaticResource MaterialDesignOutlinedComboBox}">
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamily}" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="Padding" Value="12,8" />
        <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource DividerBrush}" />
        <Setter Property="materialDesign:HintAssist.Foreground" Value="{StaticResource TextHintBrush}" />
    </Style>

    <!-- Modern DataGrid Style -->
    <Style x:Key="ModernDataGridStyle" TargetType="DataGrid" BasedOn="{StaticResource MaterialDesignDataGrid}">
        <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
        <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource DividerBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="GridLinesVisibility" Value="Horizontal" />
        <Setter Property="HorizontalGridLinesBrush" Value="{StaticResource DividerBrush}" />
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamily}" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="RowHeight" Value="48" />
        <Setter Property="ColumnHeaderHeight" Value="56" />
        <Setter Property="materialDesign:DataGridAssist.CellPadding" Value="12,8" />
        <Setter Property="materialDesign:DataGridAssist.ColumnHeaderPadding" Value="12,12" />
    </Style>

    <!-- Modern Window Style -->
    <Style x:Key="ModernWindowStyle" TargetType="Window">
        <Setter Property="Background" Value="{StaticResource BackgroundBrush}" />
        <Setter Property="FontFamily" Value="{StaticResource ModernFontFamily}" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="WindowChrome.WindowChrome">
            <Setter.Value>
                <WindowChrome CaptionHeight="32" 
                            ResizeBorderThickness="4" 
                            UseAeroCaptionButtons="True" 
                            NonClientFrameEdges="None" />
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Modern ScrollBar Style -->
    <Style x:Key="ModernScrollBarStyle" TargetType="ScrollBar">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Width" Value="12" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ScrollBar">
                    <Grid>
                        <Rectangle Fill="{StaticResource DividerBrush}" Width="2" HorizontalAlignment="Center" />
                        <Track Name="PART_Track" IsDirectionReversed="True">
                            <Track.Thumb>
                                <Thumb>
                                    <Thumb.Template>
                                        <ControlTemplate TargetType="Thumb">
                                            <Rectangle Fill="{StaticResource TextHintBrush}" 
                                                     RadiusX="2" RadiusY="2" 
                                                     Width="6" />
                                        </ControlTemplate>
                                    </Thumb.Template>
                                </Thumb>
                            </Track.Thumb>
                        </Track>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Modern Progress Bar Style -->
    <Style x:Key="ModernProgressBarStyle" TargetType="ProgressBar" BasedOn="{StaticResource MaterialDesignLinearProgressBar}">
        <Setter Property="Height" Value="4" />
        <Setter Property="Background" Value="{StaticResource DividerBrush}" />
        <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}" />
    </Style>

    <!-- Status Message Styles -->
    <Style x:Key="SuccessMessageStyle" TargetType="TextBlock" BasedOn="{StaticResource ModernBody1}">
        <Setter Property="Foreground" Value="{StaticResource SuccessBrush}" />
        <Setter Property="FontWeight" Value="Medium" />
    </Style>

    <Style x:Key="ErrorMessageStyle" TargetType="TextBlock" BasedOn="{StaticResource ModernBody1}">
        <Setter Property="Foreground" Value="{StaticResource ErrorBrush}" />
        <Setter Property="FontWeight" Value="Medium" />
    </Style>

    <Style x:Key="WarningMessageStyle" TargetType="TextBlock" BasedOn="{StaticResource ModernBody1}">
        <Setter Property="Foreground" Value="{StaticResource WarningBrush}" />
        <Setter Property="FontWeight" Value="Medium" />
    </Style>

    <Style x:Key="InfoMessageStyle" TargetType="TextBlock" BasedOn="{StaticResource ModernBody1}">
        <Setter Property="Foreground" Value="{StaticResource InfoBrush}" />
        <Setter Property="FontWeight" Value="Medium" />
    </Style>

    <!-- Animation Resources -->
    <Duration x:Key="StandardAnimationDuration">0:0:0.3</Duration>
    <Duration x:Key="FastAnimationDuration">0:0:0.15</Duration>
    <Duration x:Key="SlowAnimationDuration">0:0:0.45</Duration>

    <!-- Modern Easing Functions -->
    <CubicEase x:Key="StandardEase" EasingMode="EaseOut" />
    <QuadraticEase x:Key="FastEase" EasingMode="EaseOut" />
    <QuarticEase x:Key="SlowEase" EasingMode="EaseOut" />

</ResourceDictionary>